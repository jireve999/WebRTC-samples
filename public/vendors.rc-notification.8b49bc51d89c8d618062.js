"use strict";(self.webpackChunkh5_samples=self.webpackChunkh5_samples||[]).push([[457],{2370:(e,n,t)=>{t.d(n,{$T:()=>h,ph:()=>A,hN:()=>R});var o=t(436),c=t(5544),r=t(3986),a=t(6540),i=t(9379),s=t(961),l=t(8168),u=t(4467),f=t(6942),v=t.n(f),d=t(7557),m=t(2284),y=t(6928),p=t(2065);const h=a.forwardRef((function(e,n){var t=e.prefixCls,o=e.style,r=e.className,i=e.duration,s=void 0===i?4.5:i,f=e.showProgress,d=e.pauseOnHover,h=void 0===d||d,k=e.eventKey,A=e.content,g=e.closable,N=e.closeIcon,E=void 0===N?"x":N,C=e.props,x=e.onClick,b=e.onNoticeClose,w=e.times,R=e.hovering,S=a.useState(!1),M=(0,c.A)(S,2),I=M[0],j=M[1],F=a.useState(0),H=(0,c.A)(F,2),L=H[0],O=H[1],W=a.useState(0),D=(0,c.A)(W,2),P=D[0],T=D[1],K=R||I,_=s>0&&f,q=function(){b(k)};a.useEffect((function(){if(!K&&s>0){var e=Date.now()-P,n=setTimeout((function(){q()}),1e3*s-P);return function(){h&&clearTimeout(n),T(Date.now()-e)}}}),[s,K,w]),a.useEffect((function(){if(!K&&_&&(h||0===P)){var e,n=performance.now();return function t(){cancelAnimationFrame(e),e=requestAnimationFrame((function(e){var o=e+P-n,c=Math.min(o/(1e3*s),1);O(100*c),c<1&&t()}))}(),function(){h&&cancelAnimationFrame(e)}}}),[s,P,K,_,w]);var X=a.useMemo((function(){return"object"===(0,m.A)(g)&&null!==g?g:g?{closeIcon:E}:{}}),[g,E]),$=(0,p.A)(X,!0),z=100-(!L||L<0?0:L>100?100:L),B="".concat(t,"-notice");return a.createElement("div",(0,l.A)({},C,{ref:n,className:v()(B,r,(0,u.A)({},"".concat(B,"-closable"),g)),style:o,onMouseEnter:function(e){var n;j(!0),null==C||null===(n=C.onMouseEnter)||void 0===n||n.call(C,e)},onMouseLeave:function(e){var n;j(!1),null==C||null===(n=C.onMouseLeave)||void 0===n||n.call(C,e)},onClick:x}),a.createElement("div",{className:"".concat(B,"-content")},A),g&&a.createElement("a",(0,l.A)({tabIndex:0,className:"".concat(B,"-close"),onKeyDown:function(e){"Enter"!==e.key&&"Enter"!==e.code&&e.keyCode!==y.A.ENTER||q()},"aria-label":"Close"},$,{onClick:function(e){e.preventDefault(),e.stopPropagation(),q()}}),X.closeIcon),_&&a.createElement("progress",{className:"".concat(B,"-progress"),max:"100",value:z},z+"%"))}));var k=a.createContext({});const A=function(e){var n=e.children,t=e.classNames;return a.createElement(k.Provider,{value:{classNames:t}},n)};const g=function(e){var n,t,o,c={offset:8,threshold:3,gap:16};e&&"object"===(0,m.A)(e)&&(c.offset=null!==(n=e.offset)&&void 0!==n?n:8,c.threshold=null!==(t=e.threshold)&&void 0!==t?t:3,c.gap=null!==(o=e.gap)&&void 0!==o?o:16);return[!!e,c]};var N=["className","style","classNames","styles"];const E=function(e){var n=e.configList,t=e.placement,s=e.prefixCls,f=e.className,m=e.style,y=e.motion,p=e.onAllNoticeRemoved,A=e.onNoticeClose,E=e.stack,C=(0,a.useContext)(k).classNames,x=(0,a.useRef)({}),b=(0,a.useState)(null),w=(0,c.A)(b,2),R=w[0],S=w[1],M=(0,a.useState)([]),I=(0,c.A)(M,2),j=I[0],F=I[1],H=n.map((function(e){return{config:e,key:String(e.key)}})),L=g(E),O=(0,c.A)(L,2),W=O[0],D=O[1],P=D.offset,T=D.threshold,K=D.gap,_=W&&(j.length>0||H.length<=T),q="function"==typeof y?y(t):y;return(0,a.useEffect)((function(){W&&j.length>1&&F((function(e){return e.filter((function(e){return H.some((function(n){var t=n.key;return e===t}))}))}))}),[j,H,W]),(0,a.useEffect)((function(){var e,n;W&&x.current[null===(e=H[H.length-1])||void 0===e?void 0:e.key]&&S(x.current[null===(n=H[H.length-1])||void 0===n?void 0:n.key])}),[H,W]),a.createElement(d.aF,(0,l.A)({key:t,className:v()(s,"".concat(s,"-").concat(t),null==C?void 0:C.list,f,(0,u.A)((0,u.A)({},"".concat(s,"-stack"),!!W),"".concat(s,"-stack-expanded"),_)),style:m,keys:H,motionAppear:!0},q,{onAllRemoved:function(){p(t)}}),(function(e,n){var c=e.config,u=e.className,f=e.style,d=e.index,m=c,y=m.key,p=m.times,k=String(y),g=c,E=g.className,b=g.style,w=g.classNames,S=g.styles,M=(0,r.A)(g,N),I=H.findIndex((function(e){return e.key===k})),L={};if(W){var O=H.length-1-(I>-1?I:d-1),D="top"===t||"bottom"===t?"-50%":"0";if(O>0){var T,q,X;L.height=_?null===(T=x.current[k])||void 0===T?void 0:T.offsetHeight:null==R?void 0:R.offsetHeight;for(var $=0,z=0;z<O;z++){var B;$+=(null===(B=x.current[H[H.length-1-z].key])||void 0===B?void 0:B.offsetHeight)+K}var G=(_?$:O*P)*(t.startsWith("top")?1:-1),J=!_&&null!=R&&R.offsetWidth&&null!==(q=x.current[k])&&void 0!==q&&q.offsetWidth?((null==R?void 0:R.offsetWidth)-2*P*(O<3?O:3))/(null===(X=x.current[k])||void 0===X?void 0:X.offsetWidth):1;L.transform="translate3d(".concat(D,", ").concat(G,"px, 0) scaleX(").concat(J,")")}else L.transform="translate3d(".concat(D,", 0, 0)")}return a.createElement("div",{ref:n,className:v()("".concat(s,"-notice-wrapper"),u,null==w?void 0:w.wrapper),style:(0,i.A)((0,i.A)((0,i.A)({},f),L),null==S?void 0:S.wrapper),onMouseEnter:function(){return F((function(e){return e.includes(k)?e:[].concat((0,o.A)(e),[k])}))},onMouseLeave:function(){return F((function(e){return e.filter((function(e){return e!==k}))}))}},a.createElement(h,(0,l.A)({},M,{ref:function(e){I>-1?x.current[k]=e:delete x.current[k]},prefixCls:s,classNames:w,styles:S,className:v()(E,null==C?void 0:C.notice),style:b,times:p,key:y,eventKey:y,onNoticeClose:A,hovering:W&&j.length>0})))}))};const C=a.forwardRef((function(e,n){var t=e.prefixCls,r=void 0===t?"rc-notification":t,l=e.container,u=e.motion,f=e.maxCount,v=e.className,d=e.style,m=e.onAllRemoved,y=e.stack,p=e.renderNotifications,h=a.useState([]),k=(0,c.A)(h,2),A=k[0],g=k[1],N=function(e){var n,t=A.find((function(n){return n.key===e}));null==t||null===(n=t.onClose)||void 0===n||n.call(t),g((function(n){return n.filter((function(n){return n.key!==e}))}))};a.useImperativeHandle(n,(function(){return{open:function(e){g((function(n){var t,c=(0,o.A)(n),r=c.findIndex((function(n){return n.key===e.key})),a=(0,i.A)({},e);r>=0?(a.times=((null===(t=n[r])||void 0===t?void 0:t.times)||0)+1,c[r]=a):(a.times=0,c.push(a));return f>0&&c.length>f&&(c=c.slice(-f)),c}))},close:function(e){N(e)},destroy:function(){g([])}}}));var C=a.useState({}),x=(0,c.A)(C,2),b=x[0],w=x[1];a.useEffect((function(){var e={};A.forEach((function(n){var t=n.placement,o=void 0===t?"topRight":t;o&&(e[o]=e[o]||[],e[o].push(n))})),Object.keys(b).forEach((function(n){e[n]=e[n]||[]})),w(e)}),[A]);var R=function(e){w((function(n){var t=(0,i.A)({},n);return(t[e]||[]).length||delete t[e],t}))},S=a.useRef(!1);if(a.useEffect((function(){Object.keys(b).length>0?S.current=!0:S.current&&(null==m||m(),S.current=!1)}),[b]),!l)return null;var M=Object.keys(b);return(0,s.createPortal)(a.createElement(a.Fragment,null,M.map((function(e){var n=b[e],t=a.createElement(E,{key:e,configList:n,placement:e,prefixCls:r,className:null==v?void 0:v(e),style:null==d?void 0:d(e),motion:u,onNoticeClose:N,onAllNoticeRemoved:R,stack:y});return p?p(t,{prefixCls:r,key:e}):t}))),l)}));var x=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],b=function(){return document.body},w=0;function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getContainer,t=void 0===n?b:n,i=e.motion,s=e.prefixCls,l=e.maxCount,u=e.className,f=e.style,v=e.onAllRemoved,d=e.stack,m=e.renderNotifications,y=(0,r.A)(e,x),p=a.useState(),h=(0,c.A)(p,2),k=h[0],A=h[1],g=a.useRef(),N=a.createElement(C,{container:k,ref:g,prefixCls:s,motion:i,maxCount:l,className:u,style:f,onAllRemoved:v,stack:d,renderNotifications:m}),E=a.useState([]),R=(0,c.A)(E,2),S=R[0],M=R[1],I=a.useMemo((function(){return{open:function(e){var n=function(){for(var e={},n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return t.forEach((function(n){n&&Object.keys(n).forEach((function(t){var o=n[t];void 0!==o&&(e[t]=o)}))})),e}(y,e);null!==n.key&&void 0!==n.key||(n.key="rc-notification-".concat(w),w+=1),M((function(e){return[].concat((0,o.A)(e),[{type:"open",config:n}])}))},close:function(e){M((function(n){return[].concat((0,o.A)(n),[{type:"close",key:e}])}))},destroy:function(){M((function(e){return[].concat((0,o.A)(e),[{type:"destroy"}])}))}}}),[]);return a.useEffect((function(){A(t())})),a.useEffect((function(){var e,n;g.current&&S.length&&(S.forEach((function(e){switch(e.type){case"open":g.current.open(e.config);break;case"close":g.current.close(e.key);break;case"destroy":g.current.destroy()}})),M((function(t){return e===t&&n||(e=t,n=t.filter((function(e){return!S.includes(e)}))),n})))}),[S]),[I,N]}}}]);
//# sourceMappingURL=vendors.rc-notification.8b49bc51d89c8d618062.js.map